@tailwind base;
@tailwind components;
@tailwind utilities;

/*
  Global design tokens per WEBSITE_FIX.md
  - Brand scale, neutrals, semantic colors, focus ring, dark mode overrides
  - Keep legacy tokens temporarily to avoid breaking existing components during migration
*/
:root {
  /* WEBSITE_FIX brand scale */
  --brand-50: #e8f0ff;
  --brand-100: #d2e0ff;
  --brand-200: #a8c2ff;
  --brand-300: #7ea4ff;
  --brand-400: #598bff;
  --brand-500: #356eff; /* Primary */
  --brand-600: #1f55e6;
  --brand-700: #1742b4;
  --brand-800: #12358d;
  --brand-900: #0c235d;

  /* WEBSITE_FIX neutrals */
  --gray-50: #f8fafc; /* surfaces */
  --gray-100: #f1f5f9;
  --gray-200: #e2e8f0;
  --gray-300: #cbd5e1;
  --gray-400: #94a3b8;
  --gray-500: #64748b;
  --gray-600: #475569;
  --gray-700: #334155;
  --gray-800: #1f2937;
  --gray-900: #0f172a; /* titles on light */

  /* WEBSITE_FIX semantic */
  --success: #16a34a;
  --warning: #d97706;
  --danger: #dc2626;
  --info: #0891b2;

  /* WEBSITE_FIX text */
  --text-strong: #0f172a;
  --text-muted: #475569;

  /* Focus ring */
  --focus: #356eff;

  /* Dark mode overrides per WEBSITE_FIX */
  --bg-dark: #0b1220;
  --surface-dark: #0f172a;
  --card-dark: #121a2a;
  --divider-dark: #1f2937;
  --text-strong-dark: #e5e7eb;

  /* Legacy tokens removed — use WEBSITE_FIX tokens above (brand/gray/semantic) */
  --text-primary: var(--text-strong);
  --surface: #ffffff;
  --surface-alt: #f7f8fb;
}

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply antialiased;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: var(--text-strong);
    background-color: var(--gray-50);
    min-height: 100vh;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-semibold;
    color: var(--gray-900);
    text-transform: none;
    letter-spacing: -0.01em;
    line-height: 1.2;
  }

  p {
    @apply text-base;
    color: var(--text-muted);
    letter-spacing: -0.01em;
    line-height: 1.7;
  }

  a {
    color: var(--brand-600);
    @apply transition-colors duration-200 underline-offset-2;
  }
  a:hover {
    color: var(--brand-700);
    text-decoration: underline;
  }

  /* Global focus ring per WEBSITE_FIX */
  :focus-visible {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }
}

/* Dark theme variables */
.dark {
  --text-strong: var(--text-strong-dark);
  --text-muted: #94a3b8;
  --gray-50: #0b1220;
  --gray-900: #e5e7eb;
  --surface: var(--surface-dark);
  --surface-alt: var(--bg-dark);
}

@layer components {
  /* Generic card per WEBSITE_FIX */
  .card-v2 {
    @apply rounded-[12px] bg-white shadow-md;
    box-shadow: 0 4px 16px rgba(15, 23, 42, 0.08);
  }
  .card-v2-header {
    @apply flex items-center justify-between px-4 md:px-6 h-14 border-b;
    border-color: var(--gray-200);
  }
  .card-v2-body {
    @apply p-4 md:p-6;
  }

  /* Button styles per WEBSITE_FIX */
  .btn-primary {
    @apply inline-flex items-center justify-center text-white;
    height: 40px;
    padding: 0 20px;
    border-radius: 10px;
    background: var(--brand-500);
  }
  .btn-primary:hover { background: var(--brand-600); }
  .btn-primary:active { background: var(--brand-700); }
  .btn-primary:disabled { opacity: .5; }

  .btn-secondary {
    @apply inline-flex items-center justify-center;
    height: 40px;
    padding: 0 16px;
    border-radius: 10px;
    background: var(--gray-100);
    color: var(--gray-800);
  }
  .btn-secondary:hover { background: var(--gray-200); }

  .btn-ghost {
    @apply inline-flex items-center justify-center;
    height: 40px;
    padding: 0 12px;
    border-radius: 10px;
    background: transparent;
    color: var(--brand-600);
  }
  .btn-ghost:hover { background: var(--brand-50); }

  /* Input styles */
  .input-v2 {
    height: 40px;
    border-radius: 10px;
    border: 1px solid var(--gray-300);
    padding: 0 12px;
  }
  .input-v2:focus { box-shadow: 0 0 0 2px var(--focus); outline: none; }

  /* Utility: min-heights to prevent CLS */
  .minh-chart { min-height: 320px; }
  .minh-table { min-height: 280px; }

  /* Buttons */
  .btn-primary-yellow {
    @apply inline-flex items-center justify-center rounded-full border border-transparent bg-sunshine-yellow px-8 py-3 font-bold uppercase text-primary-blue shadow-hero transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-blue hover:-translate-y-0.5 hover:shadow-lg;
    letter-spacing: 0.2em;
  }

  .btn-secondary-blue {
    @apply inline-flex items-center justify-center rounded-full border border-sunshine-yellow/40 bg-primary-blue px-8 py-3 font-bold uppercase text-white shadow-hero transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sunshine-yellow hover:-translate-y-0.5 hover:shadow-lg;
    letter-spacing: 0.2em;
  }

  .btn-success {
    @apply inline-flex items-center justify-center rounded-full bg-success-green px-6 py-3 font-bold uppercase text-white transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-success-green hover:-translate-y-0.5 hover:shadow-lg;
    letter-spacing: 0.18em;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center rounded-full bg-accent-red px-6 py-3 font-bold uppercase text-white transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent-red hover:-translate-y-0.5 hover:shadow-lg;
    letter-spacing: 0.18em;
  }

  .btn-outline {
    @apply inline-flex items-center justify-center rounded-full border-2 border-primary-blue bg-white px-6 py-3 font-bold uppercase text-primary-blue transition-transform duration-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-blue hover:-translate-y-0.5 hover:bg-pale-yellow hover:border-sunshine-yellow;
    letter-spacing: 0.18em;
  }

  /* Cards */
  .card {
    @apply rounded-3xl border-2 border-primary-blue bg-white/95 p-8 shadow-xl shadow-primary-blue/10 transition-shadow duration-200 hover:shadow-hero;
  }

  .card-yellow {
    @apply border-2 border-primary-blue bg-pale-yellow;
  }

  .card-blue {
    @apply border-2 border-sunshine-yellow bg-primary-blue text-white;
  }

  /* Forms */
  .input {
    @apply w-full rounded-full border-2 border-primary-blue bg-white px-4 py-3 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-sunshine-yellow/50;
  }

  .input-blue {
    @apply border-2 border-sunshine-yellow bg-primary-blue text-white placeholder:text-pale-yellow;
  }

  .label {
    @apply mb-2 block text-sm font-bold uppercase text-primary-blue;
    letter-spacing: 0.18em;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-bold uppercase;
    letter-spacing: 0.24em;
  }

  .badge-success {
    @apply bg-success-green text-white;
  }

  .badge-warning {
    @apply bg-sunshine-yellow text-primary-blue;
  }

  .badge-danger {
    @apply bg-accent-red text-white;
  }

  .badge-info {
    @apply bg-primary-blue text-white;
  }

  /* Wave Divider */
  .wave-divider {
    @apply relative h-16 bg-transparent;
  }

  .wave-divider svg {
    @apply absolute bottom-0 h-full w-full;
  }

  /* Typography Utilities */

  .body-text {
    letter-spacing: -0.02em;
  }

  .section-container {
    @apply container mx-auto flex flex-col gap-12 md:gap-16;
    max-width: 1200px;
  }

  .section-eyebrow {
    @apply text-xs font-semibold uppercase text-sunshine-yellow md:text-sm;
    letter-spacing: 0.22em;
  }

  .section-heading {
    @apply text-h2-sm text-center text-primary-blue md:text-h2-md md:text-left lg:text-h2;
  }

  .icon-badge {
    @apply inline-flex h-12 w-12 items-center justify-center rounded-full bg-sunshine-yellow text-2xl font-bold text-primary-blue;
  }

  /* Animations */
  .animate-on-scroll {
    @apply translate-y-4 opacity-0 transition-all duration-700;
  }

  .animate-on-scroll.visible {
    @apply translate-y-0 opacity-100;
  }
}

/* Reduce sticky jitter safeguard */
.no-transform-ancestor * { transform: none !important; }

@layer utilities {
  .text-shadow-sm {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .text-shadow {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .text-shadow-lg {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  }
}

/*
  Global styles for the Website app
  - Align tokens with ThemeProvider: toggles `.dark` class on <html>
  - Provide shared utility classes used across dashboard/components
  - De‑duplicate any ad‑hoc utilities by centralizing here
*/

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Legacy theme alias variables removed; base colors already defined in WEBSITE_FIX tokens above */

/* Shared component utilities */
@layer components {
  /* Buttons */
  .btn-primary-yellow {
    /* Deprecated: map to brand tokens for safety */
    @apply inline-flex items-center justify-center rounded font-bold uppercase tracking-wide transition;
    background: var(--brand-500);
    color: #fff;
  }
  .btn-primary-yellow:hover { background: var(--brand-600); }
  .btn-outline {
    @apply inline-flex items-center justify-center rounded border font-bold uppercase tracking-wide transition;
    border-color: var(--brand-500);
    color: var(--brand-600);
  }
  .btn-outline:hover {
    @apply text-white;
    background: var(--brand-600);
  }

  /* Cards */
  .card {
    @apply rounded-lg border border-gray-200 bg-white shadow-sm;
  }
  .dark .card {
    @apply border-gray-700 bg-[color:var(--color-surface-2)] shadow;
  }

  .card-blue { @apply rounded-lg text-white; border: 2px solid var(--brand-600); background: var(--brand-600); }
  .dark .card-blue { border-color: var(--brand-500); }

  /* Inputs */
  .input { @apply rounded border px-4 py-3 transition; border-color: var(--gray-300); }
  .input:focus { @apply outline-none; box-shadow: 0 0 0 2px var(--focus); border-color: var(--brand-500); }

  /* Text helpers matching design tokens */
  /* Legacy utility classes removed — use Tailwind color tokens (brand/*, gray/*, success/warning/danger) */
}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}
