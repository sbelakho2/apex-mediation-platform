@tailwind base;
@tailwind components;
@tailwind utilities;

/*
  Global design tokens per WEBSITE_FIX.md
  - Brand scale, neutrals, semantic colors, focus ring, dark mode overrides
  - Keep legacy tokens temporarily to avoid breaking existing components during migration
*/
:root {
  --text: #0b1220;
  --muted: #475569;
  --card-radius: 18px;
  /* WEBSITE_FIX brand scale */
  --brand-50: #e8f0ff;
  --brand-100: #d2e0ff;
  --brand-200: #a8c2ff;
  --brand-300: #7ea4ff;
  --brand-400: #4f86ff;
  --brand-500: #2563eb; /* Primary */
  --brand-600: #1f4dcc;
  --brand-700: #1742b4;
  --brand-800: #12358d;
  --brand-900: #0c235d;

  /* WEBSITE_FIX neutrals */
  --gray-50: #f8fafc; /* surfaces */
  --gray-100: #f1f5f9;
  --gray-200: #e2e8f0;
  --gray-300: #cbd5e1;
  --gray-400: #94a3b8;
  --gray-500: #64748b;
  --gray-600: #475569;
  --gray-700: #334155;
  --gray-800: #1f2937;
  --gray-900: #0f172a; /* titles on light */

  /* WEBSITE_FIX semantic */
  --success: #16a34a;
  --warning: #d97706;
  --danger: #dc2626;
  --info: #0891b2;

  /* WEBSITE_FIX text */
  --text-strong: var(--text);
  --text-muted: var(--muted);

  /* Focus ring */
  --focus: #2563eb;

  /* Dark mode overrides per WEBSITE_FIX */
  --bg-dark: #0b1220;
  --surface-dark: #0f172a;
  --card-dark: #121a2a;
  --divider-dark: #1f2937;
  --text-strong-dark: #e5e7eb;

  /* Legacy tokens removed — use WEBSITE_FIX tokens above (brand/gray/semantic) */
  --text-primary: var(--text-strong);
  --surface: #ffffff;
  --surface-alt: #f7f8fb;
}

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply antialiased;
    font-family: var(--font-inter), system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    color: var(--text);
    background-color: #ffffff;
    min-height: 100vh;
    font-size: 1.0625rem;
    line-height: 1.6;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-pjs), var(--font-inter), system-ui, sans-serif;
    font-weight: 700;
    color: var(--gray-900);
    text-transform: none;
    letter-spacing: -0.01em;
    line-height: 1.15;
  }

  p {
    color: var(--muted);
    letter-spacing: -0.01em;
    line-height: 1.6;
    max-width: 65ch;
  }

  a {
    color: var(--brand-600);
    @apply transition-colors duration-200 underline-offset-2;
  }
  a:hover {
    color: var(--brand-700);
    text-decoration: underline;
  }

  /* Global focus ring per WEBSITE_FIX */
  :focus-visible {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }
}

/* Dark theme variables */
.dark {
  --text-strong: var(--text-strong-dark);
  --text-muted: #94a3b8;
  --gray-50: #0b1220;
  --gray-900: #e5e7eb;
  --surface: var(--surface-dark);
  --surface-alt: var(--bg-dark);
}

@layer components {
  .hero {
    text-align: center;
    padding-block: 4rem;
    padding-inline: 1.5rem;
  }

  .hero h1 {
    font-family: var(--font-pjs);
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.08;
    font-size: clamp(2.25rem, 5vw, 4rem);
    max-width: 22ch;
    margin-inline: auto;
  }

  .hero p {
    color: var(--muted);
    font-size: 1.125rem;
    line-height: 1.6;
    max-width: 60ch;
    margin-inline: auto;
  }

  .eyebrow,
  .section-eyebrow {
    font-family: var(--font-inter);
    font-weight: 600;
    font-size: 0.75rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: #9ca3af;
    padding-block: 0.25rem;
    display: inline-block;
  }

  /* Generic card per WEBSITE_FIX */
  .card-v2 {
    border-radius: var(--card-radius);
    background: #ffffff;
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.06), 0 10px 20px rgba(16, 24, 40, 0.06);
  }
  .card-v2-header {
    @apply flex items-center justify-between px-4 md:px-6 h-14 border-b;
    border-color: var(--gray-200);
  }
  .card-v2-body {
    @apply p-4 md:p-6;
  }

  /* Button styles per WEBSITE_FIX */
  .btn-primary,
  .btn-secondary {
    @apply inline-flex items-center justify-center font-medium;
    min-height: 44px;
    padding-inline: 1.5rem;
    border-radius: 12px;
    transition: background-color 200ms ease, color 200ms ease, box-shadow 200ms ease;
  }

  .btn-primary {
    background: var(--brand-500);
    color: #fff;
  }
  .btn-primary:hover { background: var(--brand-600); }
  .btn-primary:focus-visible { box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.35); }
  .btn-primary:disabled { opacity: 0.5; }

  .btn-secondary {
    border: 1px solid var(--gray-200);
    color: var(--text);
    background: transparent;
  }
  .btn-secondary:hover { background: var(--gray-50); }

  .btn-ghost {
    @apply inline-flex items-center justify-center;
    height: 40px;
    padding: 0 12px;
    border-radius: 10px;
    background: transparent;
    color: var(--brand-600);
  }
  .btn-ghost:hover { background: var(--brand-50); }

  /* Input styles */
  .input-v2 {
    height: 40px;
    border-radius: 10px;
    border: 1px solid var(--gray-300);
    padding: 0 12px;
  }
  .input-v2:focus { box-shadow: 0 0 0 2px var(--focus); outline: none; }

  /* Utility: min-heights to prevent CLS */
  .minh-chart { min-height: 320px; }
  .minh-table { min-height: 280px; }

  /* Buttons (legacy aliases mapped to WEBSITE_FIX tokens) */
  /* legacy alias stubs removed: .btn-primary-yellow, .btn-secondary-blue */

  .btn-success {
    @apply inline-flex items-center justify-center rounded-full px-6 py-3 font-bold uppercase transition-transform duration-200 hover:-translate-y-0.5 hover:shadow-lg;
    background: var(--success);
    color: #fff;
    letter-spacing: 0.18em;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center rounded-full px-6 py-3 font-bold uppercase transition-transform duration-200 hover:-translate-y-0.5 hover:shadow-lg;
    background: var(--danger);
    color: #fff;
    letter-spacing: 0.18em;
  }

  .btn-outline {
    @apply inline-flex items-center justify-center rounded-full border-2 px-6 py-3 font-bold uppercase transition-transform duration-200 hover:-translate-y-0.5;
    border-color: var(--brand-500);
    color: var(--brand-600);
  }

  /* Cards */
  .card {
    border-radius: var(--card-radius);
    padding: 22px 24px;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.04);
    transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
  }

  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 40px rgba(15, 23, 42, 0.08);
    border-color: #cbd5f5;
  }

  .card:focus-within {
    border-color: var(--brand-400);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
  }

  .card h3 {
    font-family: var(--font-pjs);
    font-weight: 700;
    letter-spacing: -0.01em;
    line-height: 1.3;
    font-size: 1.325rem;
    color: var(--text);
  }

  .card p {
    color: #4b5563;
    font-size: 0.98rem;
    line-height: 1.6;
  }

  .card-yellow { @apply border bg-brand-50; border-color: var(--brand-500); }
  /* legacy alias stub removed: .card-blue */

  /* Forms */
  /* legacy alias stubs removed: .input, .input-blue */

  .label { @apply mb-2 block text-sm font-semibold text-gray-900; }

  /* Badges */
  .badge {
    @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-bold uppercase;
    letter-spacing: 0.24em;
  }

  .badge-success {
    background: var(--success);
    color: #fff;
  }

  .badge-warning { @apply text-[color:var(--warning)]; background: color-mix(in srgb, var(--warning) 12%, white); }

  .badge-danger {
    background: var(--danger);
    color: #fff;
  }

  .badge-info { background: var(--info); color: #fff; }

  /* Wave Divider */
  .wave-divider {
    @apply relative h-16 bg-transparent;
  }

  .wave-divider svg {
    @apply absolute bottom-0 h-full w-full;
  }

  /* Typography Utilities */

  .body-text {
    letter-spacing: -0.02em;
  }

  .section-container {
    @apply container mx-auto flex flex-col gap-12 md:gap-16;
    max-width: 1200px;
  }


  .section-heading { @apply text-h2-sm text-center md:text-h2-md md:text-left lg:text-h2; color: var(--gray-900); }

  .icon-badge {
    @apply inline-flex h-12 w-12 items-center justify-center rounded-full text-2xl font-bold;
    background: var(--brand-100);
    color: var(--brand-700);
  }

  /* Animations */
  .animate-on-scroll {
    @apply translate-y-4 opacity-0 transition-all duration-700;
  }

  .animate-on-scroll.visible {
    @apply translate-y-0 opacity-100;
  }
}

/* Reduce sticky jitter safeguard */
.no-transform-ancestor * { transform: none !important; }

@layer utilities {
  .text-shadow-sm {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .text-shadow {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .text-shadow-lg {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  }
}

/*
  Global styles for the Website app
  - Align tokens with ThemeProvider: toggles `.dark` class on <html>
  - Provide shared utility classes used across dashboard/components
  - De‑duplicate any ad‑hoc utilities by centralizing here
*/

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Legacy theme alias variables removed; base colors already defined in WEBSITE_FIX tokens above */

/* Shared component utilities */
@layer components {
  /* Buttons */
  .btn-primary-yellow {
    /* Deprecated: map to brand tokens for safety */
    @apply inline-flex items-center justify-center rounded font-bold uppercase tracking-wide transition;
    background: var(--brand-500);
    color: #fff;
  }
  .btn-primary-yellow:hover { background: var(--brand-600); }
  .btn-outline {
    @apply inline-flex items-center justify-center rounded border font-bold uppercase tracking-wide transition;
    border-color: var(--brand-500);
    color: var(--brand-600);
  }
  .btn-outline:hover {
    @apply text-white;
    background: var(--brand-600);
  }

  /* Cards */
  .card {
    border-radius: var(--card-radius);
    border: 1px solid #e5e7eb;
    background: #ffffff;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.04);
    padding: 22px 24px;
    transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
  }
  .dark .card {
    border-color: var(--gray-700);
    background: var(--surface-dark);
  }

  .card-blue { @apply rounded-lg text-white; border: 2px solid var(--brand-600); background: var(--brand-600); }
  .dark .card-blue { border-color: var(--brand-500); }

  /* Inputs */
  .input { @apply rounded border px-4 py-3 transition; border-color: var(--gray-300); }
  .input:focus { @apply outline-none; box-shadow: 0 0 0 2px var(--focus); border-color: var(--brand-500); }

  /* Text helpers matching design tokens */
  /* Legacy utility classes removed — use Tailwind color tokens (brand/*, gray/*, success/warning/danger) */
}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }

  .icon-pill {
    width: 40px;
    height: 40px;
    border-radius: 999px;
    background: rgba(37, 99, 235, 0.06);
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .icon-pill svg {
    width: 22px;
    height: 22px;
    color: #2563eb;
    stroke-width: 1.75;
  }

  .feature-card {
    border-radius: var(--card-radius);
    padding: 22px 24px;
    border: 1px solid #e5e7eb;
    background: #fff;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.04);
    transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
  }

  .feature-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 14px 40px rgba(15, 23, 42, 0.08);
    border-color: #cbd5f5;
  }

  .pill {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.65rem;
    border-radius: 999px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    background: rgba(37, 99, 235, 0.08);
    color: var(--brand-600);
  }
}
