import XCTest
@testable import RivalApexMediationSDK
import UIKit

@MainActor
final class BelAppOpenTests: XCTestCase {
    
    override func tearDown() {
        BelAppOpen.resetShowTimeLimit()
        super.tearDown()
    }
    
    func testIsReadyBeforeLoad() {
        XCTAssertFalse(BelAppOpen.isReady())
    }
    
    func testShowWithoutLoad() {
        let vc = UIViewController()
        var closedCalled = false
        
        let shown = BelAppOpen.show(from: vc) {
            closedCalled = true
        }
        
        XCTAssertFalse(shown, "Should not show when no ad is loaded")
        XCTAssertFalse(closedCalled, "Closed callback should not fire")
    }
    
    func testResetShowTimeLimit() {
        // Should not crash
        BelAppOpen.resetShowTimeLimit()
    }
    
    // Note: Rate limiting test would require time manipulation
    // or dependency injection, which could be added in future
}
