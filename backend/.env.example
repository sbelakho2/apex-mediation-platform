# Environment
NODE_ENV=development

# Server
# The app binds PORT; Fly and docker-compose expect 8080
PORT=8080
API_VERSION=v1

# Database (Production: DigitalOcean Managed Postgres)
# For DO Managed Postgres use SSL=true and their provided URI.
# Example DO URL (placeholder): postgresql://apex_app:strongpass@db-do-host:25061/apex?sslmode=require
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/apexmediation
DATABASE_SSL=true
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_MS=30000

# Analytics (Optional; Postgres-first strategy)
# ClickHouse is deferred until volume demands it. Leave disabled unless needed.
# CLICKHOUSE_URL=http://localhost:8123
# CLICKHOUSE_DATABASE=apexmediation
# CLICKHOUSE_USER=default
# CLICKHOUSE_PASSWORD=
# CLICKHOUSE_MAX_CONNECTIONS=10

# Redis (Self-hosted on droplet). Always set a password; example below.
REDIS_PASSWORD=changeme
REDIS_URL=redis://:${REDIS_PASSWORD}@127.0.0.1:6379/0

# Authentication
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=7d

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=debug

# Transparency Writer (disabled by default in local dev)
TRANSPARENCY_ENABLED=0
TRANSPARENCY_SAMPLE_BPS=250
TRANSPARENCY_PRIVATE_KEY=
TRANSPARENCY_KEY_ID=dev-ed25519
TRANSPARENCY_RETRY_ATTEMPTS=3
TRANSPARENCY_RETRY_MIN_DELAY_MS=50
TRANSPARENCY_RETRY_MAX_DELAY_MS=250
TRANSPARENCY_BREAKER_THRESHOLD=5
TRANSPARENCY_BREAKER_COOLDOWN_MS=60000

# Cookies & CORS (examples)
COOKIE_SECURE=false
COOKIE_SAMESITE=lax
# Comma-separated list of allowed origins for CORS
CORS_ALLOWLIST=http://localhost:3000,http://localhost:3001

# Feature flags (backend/src/utils/featureFlags.ts)
TRANSPARENCY_ENABLED=0
BILLING_ENABLED=false
FRAUD_DETECTION_ENABLED=true
AB_TESTING_ENABLED=false
MIGRATION_STUDIO_ENABLED=false
ML_CANARY_ENABLED=false
ML_CANARY_MODEL_VERSION=stable
ML_CANARY_TRAFFIC_PERCENT=0

# External Services (Add when integrating)
# STRIPE_SECRET_KEY=sk_test_...
# PAYPAL_CLIENT_ID=...
# PAYPAL_CLIENT_SECRET=...

# Object Storage (choose one)
# DigitalOcean Spaces
# SPACES_ENDPOINT=ams3.digitaloceanspaces.com
# SPACES_REGION=ams3
# SPACES_BUCKET=apex-prod-objects
# SPACES_ACCESS_KEY_ID=...
# SPACES_SECRET_ACCESS_KEY=...
# OR Backblaze B2
# B2_BUCKET=apex-prod-objects
# B2_KEY_ID=...
# B2_APPLICATION_KEY=...

# Settlement Banking Defaults
COMPANY_NAME=Bel Consulting OÜ
SEPA_BANK_NAME=Wise Europe SA
SEPA_BANK_IBAN=EE907700771234567890
SEPA_BANK_BIC=TRWIBEB1XXX
SEPA_BANK_ADDRESS=Wise Europe SA, Narva mnt 7, 10117 Tallinn, Estonia
ACH_BANK_NAME=Community Federal Savings Bank
ACH_ACCOUNT_NUMBER=9600001234
ACH_ROUTING_NUMBER=026073150
ACH_ACCOUNT_TYPE=CHECKING
ACH_SWIFT=CMFGUS33
ACH_BANK_ADDRESS=30 W 26th Street, New York, NY 10010, USA
WISE_ACCOUNT_REFERENCE_PREFIX=APEXM
SEB_BANK_NAME=SEB Pank AS
SEB_BANK_IBAN=EE231010010000123456
SEB_BANK_BIC=EEUHEE2X
SEB_BANK_ADDRESS=Tornimäe 2, 15010 Tallinn, Estonia
ENABLE_AI_AUTOMATION=false
ENABLE_SALES_AI_OPTIMIZATION=false
ENABLE_GROWTH_AI_ANALYTICS=false
ENABLE_SELF_EVOLVING_AI=false
